{
	"info": {
		"_postman_id": "websocket-service-001",
		"name": "Fridays - WebSocket Service",
		"description": "Colecci√≥n para testing de WebSocket. NOTA: Para probar WebSockets en tiempo real, usa herramientas como Postman WebSocket o wscat.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Testing Info",
			"item": [
				{
					"name": "WebSocket Connection URL",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{websocket_url}}",
							"host": [
								"{{websocket_url}}"
							]
						},
						"description": "URL de conexi√≥n WebSocket: ws://localhost:3005\n\n## C√≥mo probar WebSocket:\n\n### Opci√≥n 1: wscat (CLI)\n```bash\nnpm install -g wscat\nwscat -c ws://localhost:3005\n```\n\n### Opci√≥n 2: Postman\n1. New Request ‚Üí WebSocket Request\n2. URL: ws://localhost:3005\n3. Connect\n4. Enviar mensajes JSON\n\n### Opci√≥n 3: JavaScript Cliente\n```javascript\nconst ws = new WebSocket('ws://localhost:3005');\n\nws.onopen = () => {\n  console.log('‚úÖ Conectado al WebSocket');\n};\n\nws.onmessage = (event) => {\n  const data = JSON.parse(event.data);\n  console.log('üì® Mensaje recibido:', data);\n};\n\nws.onerror = (error) => {\n  console.error('‚ùå Error:', error);\n};\n\nws.onclose = () => {\n  console.log('üîå Desconectado');\n};\n```\n\n## Eventos que recibir√°s:\n\n### OrderStatusChanged\n```json\n{\n  \"type\": \"OrderStatusChanged\",\n  \"orderId\": \"ORDER#123\",\n  \"status\": \"DELIVERING\",\n  \"timestamp\": \"2024-11-19T23:30:00.000Z\",\n  \"driverId\": \"user-uuid\",\n  \"location\": {\n    \"lat\": -12.046374,\n    \"lng\": -77.042793\n  }\n}\n```"
					},
					"response": []
				}
			],
			"description": "Informaci√≥n y ejemplos para testing de WebSocket"
		},
		{
			"name": "Test EventBridge Integration",
			"item": [
				{
					"name": "Trigger Order Status Change (via Delivery API)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer mock-token-for-local-dev",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"DELIVERING\",\n  \"location\": {\n    \"lat\": -12.046374,\n    \"lng\": -77.042793,\n    \"address\": \"En camino por Av. Javier Prado\"\n  }\n}"
						},
						"url": {
							"raw": "http://localhost:3003/local/api/delivery/orders/ORDER#001/status",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3003",
							"path": [
								"local",
								"api",
								"delivery",
								"orders",
								"ORDER#001",
								"status"
							]
						},
						"description": "Este endpoint del Delivery Service emite un evento EventBridge que dispara el WebSocket.\n\nFlujo:\n1. Este endpoint actualiza el estado de la orden\n2. Emite evento a EventBridge\n3. EventBridge dispara el Lambda handleOrderStatusChange\n4. Lambda env√≠a notificaci√≥n a todos los clientes conectados via WebSocket"
					},
					"response": []
				}
			],
			"description": "Testing de la integraci√≥n EventBridge ‚Üí WebSocket"
		}
	],
	"variable": [
		{
			"key": "websocket_url",
			"value": "ws://localhost:3005",
			"type": "string"
		}
	]
}
